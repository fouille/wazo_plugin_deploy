import{template_sip_global_data_uuid,host,tenant_uuid,token_session}from"./index";export async function update_sip_template_endpoint(e){let t="no";"rtp_symmetric,rewrite_contact"==e.nat.sip_value&&(t="yes");const s={method:"PUT",headers:{"Content-Type":"application/json","Wazo-Tenant":tenant_uuid,"X-Auth-Token":token_session},body:JSON.stringify({endpoint_section_options:[["rtp_timeout","7200"],["allow_transfer","yes"],["use_ptime","yes"],["callerid","wazo"],["direct_media","no"],["dtmf_mode","rfc4733"],["language",e.locale.sip_value],["inband_progress","no"],["rtp_timeout_hold","0"],["timers_sess_expires","600"],["timers_min_se","90"],["trust_id_inbound","no"],["allow_subscribe","yes"],["allow",e.codecs.sip_value],["rewrite_contact",t],["rtp_symmetric",t],["moh_suggest",e.moh.sip_value]]})};try{let e=await fetch(host+"/api/confd/1.1/endpoints/sip/templates/"+template_sip_global_data_uuid,s);if(null==e||204==e.status||e.ok){const e=document.getElementsByClassName("submit"),t=document.getElementsByClassName("backward");for(let t of e)t.setAttribute("disabled","yes");for(let e of t)e.setAttribute("disabled","yes");document.getElementById("title_text").innerText="Terminé !",document.getElementById("subtitle_text").innerText=""}else console.log("no auth")}catch(e){console.error("Erreur :",e)}}export function create_nice_select(e,t){e.after($("<div></div>").addClass("nice-select").addClass(e.attr("class")||"").addClass(e.attr("disabled")?"disabled":"").attr("tabindex",e.attr("disabled")?null:"0").html('<span class="current"></span><ul class="list"></ul>'));var s=e.next(),a=e.find("option"),l=e.find("option:selected");s.find(".current").html(l.data("display")||l.text()),a.each((function(e){var a=$(this),l=a.data("display");s.find("ul").append($("<li></li>").attr("data-value",a.val()).attr("data-display",l||null).addClass("option "+t+(a.is(":selected")?" selected":"")+(a.is(":disabled")?" disabled":"")).html(a.text()))}))}export function add_info_to_summary(e){document.getElementsByClassName("check_before_send")[0].innerHTML="<li><span class='font-weight-bold'> Langue :</span> "+e.locale.label+"</li><li><span class='font-weight-bold'>Codecs activés :</span> "+e.codecs.label+"</li><li><span class='font-weight-bold'>Musique d'attente :</span> "+e.moh.label+"</li><li><span class='font-weight-bold'>Nat Actif :</span> "+e.nat.label+"</li>"}